.container
  img.img-responsive(src="{{ comicCtrl.banner[0].url }}")
  br
  uib-tabset(active="active")
    uib-tab(index="0" heading="comic")
      div comic count {{ comicCtrl.comics.length }}
      br
      div(data-toggle="buttons")
        label.btn.btn-default(ng-class="{active:comicCtrl.showAll}")
          input(type="checkbox" ng-model="comicCtrl.showAll" ng-change="comicCtrl.toggleReadFilter()")
          | show all
      br
      table.table.table-hover
        tbody(ng-show="(comicCtrl.comics | filter: {new: true}).length")
          tr.info(ng-click="newIsCollapsed = !newIsCollapsed")
            td(colspan="2")
              strong recently added &nbsp;
              span.badge {{ (comicCtrl.comics | filter: {new: true}).length }}
              button.btn.btn-info.btn-xs.pull-right(ng-click="comicCtrl.clearNewAll()") clear all
            td
              span.glyphicon.glyphicon-chevron-down.pull-right(ng-show="newIsCollapsed")
              span.glyphicon.glyphicon-chevron-up.pull-right(ng-hide="newIsCollapsed")
          tr(uib-collapse="newIsCollapsed" ng-repeat="comic in (comicCtrl.comics | filter: {new: true}) | orderBy: 'title'")
            td.col-xs-1
              div(data-toggle="buttons")
                label.btn.btn-xs(ng-class="(comic.read) ? 'btn-success' : 'btn-default'")
                  input(type="checkbox" ng-model="comic.read" ng-change="comicCtrl.updateComic(comic)")
                  | read
            td
              a(href="{{ comic.url }}") {{ comic.name }} &nbsp;
              span.label.label-info(ng-show="{{ comic.new }}") new!
            td
              span.glyphicon.glyphicon-ok.pull-right(style="color:silver;" ng-show="{{ comic.new }}" ng-click="comicCtrl.clearNew(comic)")

        tbody(ng-repeat="(key, value) in (comicCtrl.comics | filter:{read:comicCtrl.readFilter}) | groupBy: 'title'")
          tr(ng-click="comicsIsCollapsed = !comicsIsCollapsed")
            td(colspan="2")
              strong {{ key }} &nbsp;
              span.badge {{ value.length }}
            td
              span.glyphicon.glyphicon-chevron-down.pull-right(ng-show="comicsIsCollapsed")
              span.glyphicon.glyphicon-chevron-up.pull-right(ng-hide="comicsIsCollapsed")
          tr(uib-collapse="comicsIsCollapsed" ng-repeat="comic in value | orderBy: 'id'")
            td.col-xs-1
              div(data-toggle="buttons")
                label.btn.btn-xs(ng-class="(comic.read) ? 'btn-success' : 'btn-default'")
                  input(type="checkbox" ng-model="comic.read" ng-change="comicCtrl.updateComic(comic)")
                  | read
            td
              a(href="{{ comic.url }}") {{ comic.name }} &nbsp;
              span.label.label-info(ng-show="{{ comic.new }}") new!
            td
              button.close(type='button' ng-click="comicCtrl.deleteComic(comic)") &times;

    uib-tab(index="1" heading="history")
      div history count {{ comicCtrl.history.length }}
      br
      table.table.table-hover
        tbody(ng-repeat="(key, value) in comicCtrl.history | groupBy: 'title'")
          tr(ng-click="historyIsCollapsed = !historyIsCollapsed")
            td
              strong {{ key }} &nbsp;
              span.badge {{ value.length }}
            td
              span.glyphicon.glyphicon-chevron-down.pull-right(ng-show="historyIsCollapsed")
              span.glyphicon.glyphicon-chevron-up.pull-right(ng-hide="historyIsCollapsed")
          tr(uib-collapse="!historyIsCollapsed" ng-repeat="comic in value | orderBy: 'id'")
            td
              a(href="{{ comic.url }}") {{ comic.name }}
            td
              button.close(type='button' ng-click="comicCtrl.deleteHistory(comic)") &times;

    uib-tab(index="2" heading="banner")
      table.table.table-hover
        thead
          tr
            th banner filename
            th updated
            th
        tbody
          tr(ng-repeat="bnr in comicCtrl.banner")
            td(style="word-break:break-all;")
              a(href="{{ bnr.url }}") {{ bnr.filename }}
            td {{ bnr.updated | date : 'yyyy/MM/dd HH:mm' }}
            td
              button.close(type='button' ng-click='comicCtrl.deleteBanner(bnr)') &times;
